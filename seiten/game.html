<!DOCTYPE html>
<html lang="de">
<!--
    Datei: game.html
    Projekt: Lehrer Tools Web-App
    Autor: Nico Kaschube
    Jahr: 2025
    Beschreibung: Jeopardy Quiz Spielseite mit mehreren Modi und Fragen-Editor.
-->
<head>
        <!--
            HEAD-Bereich: Einstellungen, Styles und Skripte für die Seite.
            - Styles: Aussehen und Layout der Seite
            - JavaScript: Dynamische Funktionen (z.B. Responsive-Design)
        -->
            <script>
            function setBaseSizeVar() {
                var vh = window.innerHeight * 0.01;
                var vw = window.innerWidth * 0.01;
                if (window.matchMedia('(orientation: portrait)').matches) {
                    document.documentElement.style.setProperty('--base-size', vw + 'px');
                } else {
                    document.documentElement.style.setProperty('--base-size', vh + 'px');
                }
            }
            window.addEventListener('resize', setBaseSizeVar);
            window.addEventListener('orientationchange', setBaseSizeVar);
            document.addEventListener('DOMContentLoaded', setBaseSizeVar);
            </script>
        <style>
            /* Fallback für ältere Browser: Sorgt für Lesbarkeit, wenn moderne CSS-Features nicht unterstützt werden */
            @supports not (container-type: inline-size) {
                .header-title, .game-title, .game-section-title {
                    font-size: clamp(2.5em, 6vw, 5em);
                }
                .game-card, .game-section {
                    font-size: clamp(1em, 3vw, 2em);
                }
            }
            .header-title, .game-title, .game-section-title {
                font-weight: 800;
                text-shadow: 0 2px 8px #222, 0 0 1px #fff;
            }
            .game-card, .game-section {
                font-weight: 500;
            }
            :root {
                --color-bg: #0a0a0a;
                --color-accent: #9d4edd;
                --color-primary: #e0aaff;
                --color-secondary: #c77dff;
                --color-card-bg: rgba(26,26,26,0.8);
            }
            body {
                background: var(--color-bg);
                color: var(--color-primary);
            }
            .btn-primary {
                background: var(--color-accent);
                color: #fff;
            }
            .header-title, .game-card, .game-section {
                will-change: transform;
            }
        </style>
    <!-- Meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeopardy Quiz - Oberlinhaus Lehrer Tools</title>
    
    <!-- SEO -->
    <meta name="description" content="Jeopardy Quiz für Azubis - Verschiedene Modi: IT, Lagerlogistik, Custom. Anpassbar für Lehrer!">
    <meta name="keywords" content="Jeopardy, Quiz, Azubi Lernspiel, IT Ausbildung, Lagerlogistik, Oberlinhaus">
    <meta name="author" content="Nico Kaschube">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Jeopardy Quiz - Oberlinhaus">
    <meta property="og:description" content="Interaktives Lernspiel für Azubis - Mehrere Modi verfügbar">
    <meta property="og:site_name" content="Jeopardy Quiz">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Jeopardy Quiz - Oberlinhaus">
    <meta property="twitter:description" content="Interaktives Lernspiel für Azubis">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../icons/logo-simple.svg">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="../pwa/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Jeopardy Quiz">
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/animations.css">
    <style>
        :root {
            --base-size: 1vh;
        }
        @media (orientation: portrait) {
            :root {
                --base-size: 1vw;
            }
        }
        html, body {
            font-size: var(--base-size);
        }
        main.page-container {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto 1fr auto;
            min-height: 100vh;
        }
        .game-header, .game-main, .game-section {
            container-type: inline-size;
            container-name: mainblock;
        }
        .header-title, .game-title, .game-section-title {
            font-size: clamp(2.5em, 6cqw, 5em);
        }
        .game-card, .game-section {
            font-size: clamp(1em, 3cqw, 2em);
        }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
        }
        @media (max-width: 700px) {
            .game-grid {
                grid-template-columns: 1fr;
            }
        }
        .game-card {
            padding: min(2.5em, 5cqw);
        }
    </style>
    
    <!-- Service Worker Registration -->
    <script>
        // PWA: Service Worker registrieren (nur bei HTTP/HTTPS, nicht file://)
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('../pwa/sw.js');
                    console.log('✅ Service Worker registriert:', registration.scope);
                } catch (error) {
                    console.error('❌ Service Worker Fehler:', error);
                }
            });
        } else if (window.location.protocol === 'file:') {
            console.log('ℹ️ Service Worker deaktiviert (file:// Protokoll)');
        }
    </script>
</head>
<body>
                <iframe src="background-bubbles-boxes.html" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;border:none;pointer-events:none;" aria-hidden="true" tabindex="-1"></iframe>
            <!-- HEADER: Seitenkopf mit Titel, Navigation und Login/Logout -->
        <!--
        Testing-Hinweis:
        Teste die Seite auf verschiedenen Geräten, Browsern und mit Screenreadern.
        Prüfe Zoom, Kontrast und Layout bei extremen Größen.
        -->
    <!-- Game Header (wie bei anderen Tools) -->
    <header class="game-header">
            <!--
                Hauptnavigation und Titel der Seite.
                - Links führen zurück zur Startseite
                - Login/Logout wird per JavaScript gesteuert
            -->
            <!--
                SPIELBEREICH: Jeopardy Quiz mit verschiedenen Modi
                - Karten und Sektionen zeigen Fragen, Punkte und Spielstatus
            -->
        <div class="header-title">
            <span class="emoji-icon" style="font-size: 2rem; display: inline-block; vertical-align: middle; margin-right: 0.5rem;">🎮</span>
            <h1>Jeopardy Quiz</h1>
        </div>
        <div style="display: flex; gap: 1rem; align-items: center;">
            <a href="index.html" class="btn">← Zurück</a>
            <span id="userDisplayGame" class="user-display" style="display: none;">👤 Gast</span>
            <button id="loginBtnGame" class="btn">🔐 Anmelden</button>
            <button id="logoutBtnGame" class="btn" style="display: none;">🚪 Abmelden</button>
        </div>
    </header>

    <!-- Setup Screen (direkt sichtbar, kein Modus-Auswahl mehr) -->
    <div id="setupScreen" class="setup-screen">
        <div class="setup-container">
            <div class="setup-subtitle">
                <span class="developer-badge">👨‍💻 Entwickelt von Nico Kaschube</span>
            </div>
            
            <!-- Theme and Settings Panel -->
            <div class="settings-panel">
                <h3 class="panel-title">⚙️ Einstellungen</h3>
                
                <!-- Visuelle Einstellungen -->
                <div class="settings-section">
                    <h4 class="section-label">🎨 Visuelles</h4>
                    <div class="settings-grid">
                        <div class="setting-group">
                            <label for="themeSelect">Design-Theme:</label>
                            <select id="themeSelect" class="theme-select">
                                <option value="purple-blue">Lila-Blau (Standard)</option>
                                <option value="ocean-blue">Ozean-Blau</option>
                                <option value="green-silver">Grün-Silber</option>
                                <option value="dark-mode">Dark Mode</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label for="animationToggle">Animationen:</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="animationToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Spiel Einstellungen -->
                <div class="settings-section">
                    <h4 class="section-label">🎮 Spielmechanik</h4>
                    <div class="settings-grid">
                        <div class="setting-group">
                            <label for="soundToggle">Sound-Effekte:</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="soundToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label for="dailyDoublesToggle">Daily Doubles:</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="dailyDoublesToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label for="timerToggle">Timer aktivieren:</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="timerToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Timer Konfiguration -->
                    <div class="setting-group timer-config" id="timerConfig" style="display: none;">
                        <label for="timerDuration">⏱️ Zeit pro Frage:</label>
                        <div class="timer-controls">
                            <input type="range" id="timerDuration" min="15" max="120" value="60" step="5" class="timer-slider">
                            <span id="timerDisplay" class="timer-display">60 Sekunden</span>
                        </div>
                        <div class="timer-presets">
                            <button type="button" class="preset-btn" data-time="30">30s</button>
                            <button type="button" class="preset-btn" data-time="60">60s</button>
                            <button type="button" class="preset-btn active" data-time="90">90s</button>
                            <button type="button" class="preset-btn" data-time="120">120s</button>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="settings-actions">
                    <button id="showRulesBtn" class="settings-action-btn">📋 Spielregeln</button>
                    <button id="openEditorBtn" class="settings-action-btn" style="display: none;">✏️ Fragen bearbeiten</button>
                    <button id="openStatsBtn" class="settings-action-btn" style="display: none;">📊 Statistiken</button>
                    <button id="openFeedbackBtn" class="settings-action-btn">💬 Feedback</button>
                </div>
            </div>

            <div class="setup-content">
                <div class="game-mode-selection">
                    <h2>Spielmodus wählen</h2>
                    <div class="mode-buttons">
                        <button class="mode-btn" data-mode="single">Einzelspieler</button>
                        <button class="mode-btn" data-mode="group">Gruppenspieler</button>
                    </div>
                </div>

                <div id="playerSetup" class="player-setup hidden">
                    <h3 id="setupTitle">Spieler hinzufügen</h3>
                    <div id="singlePlayerSetup" class="setup-section hidden">
                        <label for="playerCount">Anzahl Spieler (2-6):</label>
                        <input type="number" id="playerCount" min="2" max="6" value="2">
                        <div id="playerNames">
                            <input type="text" class="player-name" placeholder="Spieler 1 Name" value="Spieler 1">
                            <input type="text" class="player-name" placeholder="Spieler 2 Name" value="Spieler 2">
                        </div>
                    </div>

                    <div id="groupPlayerSetup" class="setup-section hidden">
                        <label for="groupCount">Anzahl Gruppen (2-4):</label>
                        <input type="number" id="groupCount" min="2" max="4" value="2">
                        <label for="membersPerGroup">Mitglieder pro Gruppe (1-5):</label>
                        <input type="number" id="membersPerGroup" min="1" max="5" value="2">
                        <div id="groupNames">
                            <input type="text" class="group-name" placeholder="Gruppe 1 Name" value="Team Alpha">
                            <input type="text" class="group-name" placeholder="Gruppe 2 Name" value="Team Beta">
                        </div>
                    </div>

                    <div class="setup-buttons">
                        <button id="startGame" class="start-btn">Spiel starten</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Editor Screen -->
    <div id="editorScreen" class="editor-screen hidden">
        <div class="editor-container">
            <div class="editor-header">
                <h1>📝 Fragen-Editor für Lehrer</h1>
                <p class="editor-subtitle">Erstelle und bearbeite deine eigenen Jeopardy-Kategorien und Fragen</p>
                <div class="editor-search-bar">
                    <input type="text" id="editorSearchInput" placeholder="🔍 Fragen durchsuchen..." class="editor-search-input">
                    <span id="searchResultCount" class="search-result-count"></span>
                </div>
                <div class="editor-actions">
                    <button id="loadTemplateBtn" class="btn-template">🎓 Berufs-Vorlage laden</button>
                    <button id="saveQuestionsBtn" class="btn-save">💾 Speichern</button>
                    <button id="resetQuestionsBtn" class="btn-reset">🔄 Zurücksetzen</button>
                    <button id="importQuestionsBtn" class="btn-import">📥 Importieren</button>
                    <button id="exportQuestionsBtn" class="btn-export">📤 Exportieren</button>
                    <button id="closeEditorBtn" class="btn-close">✖️ Schließen</button>
                </div>
            </div>

            <div class="editor-content">
                <!-- Categories Overview -->
                <div class="categories-section">
                    <div class="section-header">
                        <h2>Kategorien</h2>
                        <button id="addCategoryBtn" class="btn-add">+ Neue Kategorie</button>
                    </div>
                    <div id="categoriesList" class="categories-list">
                        <!-- Categories will be dynamically added here -->
                    </div>
                </div>

                <!-- Questions Editor -->
                <div class="questions-section">
                    <div class="section-header">
                        <h2 id="currentCategoryTitle">Fragen</h2>
                        <span id="questionCounter" class="question-counter">0 / 20 Fragen</span>
                    </div>
                    <div id="questionsEditor" class="questions-editor">
                        <div class="editor-placeholder">
                            <p>👈 Wähle eine Kategorie aus, um Fragen zu bearbeiten</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Import/Export Modal -->
        <div id="importExportModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="importExportTitle">Import/Export</h3>
                    <button class="modal-close-btn" id="closeImportExportBtn">✖️</button>
                </div>
                <div class="modal-body">
                    <textarea id="importExportData" class="import-export-textarea" placeholder="JSON-Daten hier einfügen..."></textarea>
                </div>
                <div class="modal-footer">
                    <button id="confirmImportBtn" class="modal-btn hidden">Importieren</button>
                    <button id="copyExportBtn" class="modal-btn hidden">Kopieren</button>
                    <button id="cancelImportExportBtn" class="modal-btn-secondary">Abbrechen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Feedback & Bug Report Modal -->
    <div id="feedbackModal" class="modal hidden">
        <div class="modal-content feedback-modal-content">
            <div class="modal-header">
                <h3>💬 Feedback & Bug Report</h3>
                <button class="modal-close-btn" id="closeFeedbackBtn">✖️</button>
            </div>
            <div class="modal-body">
                <form id="feedbackForm" class="feedback-form">
                    <div class="form-group">
                        <label for="feedbackName">Name (optional):</label>
                        <input type="text" id="feedbackName" placeholder="Dein Name oder 'Anonym'...">
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackType">Typ: *</label>
                        <select id="feedbackType" required>
                            <option value="">-- Bitte wählen --</option>
                            <option value="bug">� Bug melden (Fehler im Spiel)</option>
                            <option value="feedback">� Verbesserungsvorschlag</option>
                            <option value="feature">✨ Neue Funktion vorschlagen</option>
                            <option value="question">❓ Frage / Unklarheit</option>
                            <option value="other">📝 Sonstiges</option>
                        </select>
                    </div>

                    <div class="form-group" id="priorityGroup" style="display: none;">
                        <label for="bugPriority">Dringlichkeit: *</label>
                        <select id="bugPriority">
                            <option value="low">🟢 Niedrig - Kosmetischer Fehler</option>
                            <option value="medium" selected>🟡 Mittel - Funktion eingeschränkt</option>
                            <option value="high">🟠 Hoch - Funktion nicht nutzbar</option>
                            <option value="critical">🔴 Kritisch - Spiel crasht/blockiert</option>
                        </select>
                    </div>

                    <div class="form-group" id="categoryGroup" style="display: none;">
                        <label for="bugCategory">Bereich: *</label>
                        <select id="bugCategory">
                            <option value="">-- Bitte wählen --</option>
                            <option value="spielbrett">🎮 Spielbrett / Kategorien</option>
                            <option value="fragen">❓ Fragen / Antworten</option>
                            <option value="punkte">📊 Punkte / Punktestand</option>
                            <option value="daily-double">💰 Daily Double</option>
                            <option value="timer">⏱️ Timer</option>
                            <option value="sounds">🔊 Sounds / Audio</option>
                            <option value="design">🎨 Design / Layout</option>
                            <option value="editor">✏️ Fragen-Editor</option>
                            <option value="settings">⚙️ Einstellungen</option>
                            <option value="other">🔧 Anderer Bereich</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="feedbackDescription">Beschreibung: *</label>
                        <textarea 
                            id="feedbackDescription" 
                            placeholder="Beschreibe dein Anliegen so detailliert wie möglich...&#10;&#10;📌 Bei Bugs hilfreich:&#10;• Was hast du gemacht? (Schritte zum Problem)&#10;• Was sollte passieren?&#10;• Was ist stattdessen passiert?&#10;• Tritt der Fehler immer auf oder nur manchmal?" 
                            rows="10"
                            maxlength="1500"
                            required
                        ></textarea>
                        <span class="char-counter" id="charCounter">0 / 1500 Zeichen</span>
                    </div>

                    <div class="form-group" id="stepsGroup" style="display: none;">
                        <label for="bugSteps">Schritte zum Reproduzieren (optional):</label>
                        <textarea 
                            id="bugSteps" 
                            placeholder="1. Klicke auf...&#10;2. Wähle...&#10;3. Dann passiert..." 
                            rows="4"
                            maxlength="500"
                        ></textarea>
                    </div>

                    <div class="feedback-info">
                        <p>ℹ️ <strong>Dein Feedback hilft, das Spiel zu verbessern!</strong></p>
                        <p style="font-size: 0.85rem; color: var(--text-secondary);">
                            📱 Technische Infos (Browser, System) werden automatisch mitgesendet.<br>
                            🔒 Deine Daten werden nur zur Verbesserung genutzt.
                        </p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="submitFeedbackBtn" class="modal-btn btn-primary">📤 Feedback senden</button>
                <button type="button" id="cancelFeedbackBtn" class="modal-btn-secondary">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal hidden">
        <div class="modal-content login-modal-content">
            <div class="modal-header">
                <h3>🔐 Anmelden</h3>
                <button class="modal-close-btn" id="closeLoginBtn">✖️</button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">Anmelden</button>
                    <button class="auth-tab" data-tab="register">Registrieren</button>
                </div>

                <!-- Login Form -->
                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="loginUsername">Benutzername:</label>
                        <input type="text" id="loginUsername" placeholder="Dein Benutzername" required autocomplete="username">
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword">Passwort:</label>
                        <input type="password" id="loginPassword" placeholder="Dein Passwort" required autocomplete="current-password">
                    </div>

                    <div class="auth-info">
                        <!-- Keine Test-Accounts auf dieser Seite -->
                    </div>

                    <div id="loginError" class="auth-error" style="display: none;"></div>
                    <div id="loginSuccess" class="auth-success" style="display: none;"></div>
                </form>

                <!-- Register Form -->
                <form id="registerForm" class="auth-form" style="display: none;">
                    <div class="form-group">
                        <label for="registerUsername">Benutzername:</label>
                        <input type="text" id="registerUsername" placeholder="Min. 3 Zeichen" required autocomplete="username">
                    </div>
                    
                    <div class="form-group">
                        <label for="registerPassword">Passwort:</label>
                        <input type="password" id="registerPassword" placeholder="Min. 6 Zeichen" required autocomplete="new-password">
                    </div>

                    <div class="form-group">
                        <label for="registerPasswordConfirm">Passwort bestätigen:</label>
                        <input type="password" id="registerPasswordConfirm" placeholder="Passwort wiederholen" required autocomplete="new-password">
                    </div>

                    <div class="auth-info">
                        <p style="font-size: 0.85rem; color: var(--text-secondary);">
                            ℹ️ Neue Accounts haben standardmäßig <strong>Gast-Rechte</strong>.<br>
                            Für Lehrer/Admin-Rechte kontaktiere einen Administrator.
                        </p>
                    </div>

                    <div id="registerError" class="auth-error" style="display: none;"></div>
                    <div id="registerSuccess" class="auth-success" style="display: none;"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="submitLoginBtn" class="modal-btn btn-primary">🔓 Anmelden</button>
                <button type="button" id="submitRegisterBtn" class="modal-btn btn-primary" style="display: none;">✅ Registrieren</button>
                <button type="button" id="cancelLoginBtn" class="modal-btn-secondary">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statsModal" class="modal hidden">
        <div class="modal-content stats-modal-content">
            <div class="modal-header">
                <h3>📊 Statistiken & Analytics</h3>
                <button class="modal-close-btn" id="closeStatsBtn">✖️</button>
            </div>
            <div class="modal-body">
                <div class="stats-tabs">
                    <button class="stats-tab active" data-tab="questions">❓ Fragen</button>
                    <button class="stats-tab" data-tab="categories">📂 Kategorien</button>
                    <button class="stats-tab" data-tab="overall">📈 Gesamt</button>
                </div>

                <!-- Questions Tab -->
                <div class="stats-content active" id="questionsTab">
                    <div class="stats-section">
                        <h4>🔥 Schwierigste Fragen (Top 10)</h4>
                        <div id="difficultQuestionsTable" class="stats-table">
                            <p class="stats-empty">Noch keine Daten verfügbar. Spiele zuerst einige Runden!</p>
                        </div>
                    </div>
                </div>

                <!-- Categories Tab -->
                <div class="stats-content" id="categoriesTab">
                    <div class="stats-section">
                        <h4>📂 Performance nach Kategorie</h4>
                        <div id="categoryPerformanceChart" class="stats-chart">
                            <p class="stats-empty">Noch keine Daten verfügbar.</p>
                        </div>
                    </div>
                </div>

                <!-- Overall Tab -->
                <div class="stats-content" id="overallTab">
                    <div class="stats-section">
                        <h4>📊 Gesamtstatistik</h4>
                        <div id="overallStatsGrid" class="stats-grid">
                            <p class="stats-empty">Noch keine Daten verfügbar.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="exportStatsBtn" class="modal-btn btn-primary">📤 Exportieren (JSON)</button>
                <button type="button" id="clearStatsBtn" class="modal-btn-danger">🗑️ Statistiken löschen</button>
                <button type="button" id="closeStatsModalBtn" class="modal-btn-secondary">Schließen</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="game-screen hidden">
        <!-- Header with Players/Groups -->
        <div class="game-header">
            <div class="players-container" id="playersContainer"></div>
            <div class="game-info">
                <div class="current-player">
                    Aktueller Spieler: <span id="currentPlayerName">Spieler 1</span>
                </div>
                <div class="game-stats">
                    <span class="stat-item">Fragen: <span id="questionsAnswered">0</span>/25</span>
                    <span class="stat-item">Streak: <span id="currentStreak">0</span></span>
                </div>
                <div class="quick-actions">
                    <button id="pauseGameBtn" class="quick-action-btn" title="Spiel pausieren">⏸️</button>
                    <button id="fullscreenBtn" class="quick-action-btn" title="Vollbild">🔳</button>
                    <button id="helpBtn" class="quick-action-btn" title="Hilfe & Shortcuts">❓</button>
                </div>
                <button id="nextRoundBtn" class="next-round-btn hidden">Nächste Runde</button>
                <button id="endGameBtn" class="end-game-btn">Spiel beenden</button>
                <button id="showStatsBtn" class="stats-btn">📊 Statistiken</button>
            </div>
        </div>

        <!-- Jeopardy Board -->
        <div class="jeopardy-board">
            <div class="categories-row">
                <div class="category" data-category="0">
                    <span class="category-title">Kategorie 1</span>
                </div>
                <div class="category" data-category="1">
                    <span class="category-title">Kategorie 2</span>
                </div>
                <div class="category" data-category="2">
                    <span class="category-title">Kategorie 3</span>
                </div>
                <div class="category" data-category="3">
                    <span class="category-title">Kategorie 4</span>
                </div>
                <div class="category" data-category="4">
                    <span class="category-title">Kategorie 5</span>
                </div>
            </div>

            <div class="questions-grid" id="questionsGrid">
                <!-- Questions will be generated dynamically -->
            </div>
        </div>
    </div>

    <!-- Question Modal -->
    <div id="questionModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalCategory">Kategorie</h3>
                <div class="modal-points-container">
                    <span id="modalPoints" class="modal-points">100</span>
                    <div id="timerRing" class="timer-ring hidden">
                        <svg class="timer-svg" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" class="timer-circle-bg"></circle>
                            <circle cx="50" cy="50" r="45" class="timer-circle-progress" id="timerCircle"></circle>
                        </svg>
                        <div class="timer-text" id="timerText">60</div>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <p id="modalQuestion">Frage wird hier angezeigt...</p>
                <div class="modal-answer hidden">
                    <p><strong>Antwort:</strong> <span id="modalAnswerText">Antwort wird hier angezeigt...</span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="showAnswerBtn" class="modal-btn show-answer-btn">Antwort zeigen</button>
                <div id="answerButtons" class="answer-buttons hidden">
                    <button id="correctBtn" class="modal-btn correct-btn">Richtig (+Punkte)</button>
                    <button id="wrongBtn" class="modal-btn wrong-btn">Falsch (-Punkte)</button>
                </div>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Winner Modal -->
    <div id="winnerModal" class="modal hidden">
        <div class="modal-content winner-content">
            <div class="modal-header">
                <h2>🏆 Spiel beendet! 🏆</h2>
            </div>
            <div class="modal-body">
                <div id="confetti-container" class="confetti-container"></div>
                <div id="finalResults" class="final-results"></div>
                <div id="winnerAnnouncement" class="winner-announcement"></div>
                <div id="gameStatsSummary" class="game-stats-summary"></div>
            </div>
            <div class="modal-footer">
                <button id="newGameBtn" class="modal-btn new-game-btn">Neues Spiel</button>
                <button id="backToSetupBtn" class="modal-btn back-setup-btn">Zurück zum Setup</button>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Daily Double Modal -->
    <div id="dailyDoubleModal" class="modal hidden">
        <div class="modal-content daily-double-content">
            <div class="modal-header daily-double-header">
                <h2>🎯 DAILY DOUBLE! 🎯</h2>
            </div>
            <div class="modal-body">
                <p class="daily-double-text">Du hast ein Daily Double gefunden!</p>
                <p class="daily-double-info">Kategorie: <span id="ddCategory">Geschichte</span></p>
                <p class="daily-double-info">Aktueller Punktestand: <span id="ddCurrentScore">500</span></p>
                
                <div class="wager-section">
                    <label for="wagerAmount">💰 Dein Einsatz:</label>
                    <div class="wager-controls">
                        <input type="number" id="wagerAmount" class="wager-input" min="100" max="1000" value="500" step="100">
                        <div class="wager-buttons">
                            <button class="wager-btn" data-amount="100">100</button>
                            <button class="wager-btn" data-amount="500">500</button>
                            <button class="wager-btn" data-amount="1000">1000</button>
                            <button class="wager-btn" id="allInBtn">Alles!</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirmWagerBtn" class="modal-btn confirm-wager-btn">Einsatz bestätigen</button>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Audio Elements -->
    <div id="audioElements" class="hidden">
        <audio id="themeSound" preload="auto">
            <source src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADAAA" type="audio/mpeg">
        </audio>
        <audio id="clickSound" preload="auto"></audio>
        <audio id="correctSound" preload="auto"></audio>
        <audio id="wrongSound" preload="auto"></audio>
        <audio id="winnerSound" preload="auto"></audio>
        <audio id="dailyDoubleSound" preload="auto"></audio>
    </div>

    <!-- Statistics Modal -->
    <div id="statisticsModal" class="modal hidden">
        <div class="modal-content stats-content">
            <div class="modal-header">
                <h2>📊 Spieler-Statistiken</h2>
            </div>
            <div class="modal-body">
                <div id="playerStatsContainer" class="player-stats-container"></div>
            </div>
            <div class="modal-footer">
                <button id="closeStatsBtn" class="modal-btn close-stats-btn">Schließen</button>
                <button id="resetStatsBtn" class="modal-btn reset-stats-btn">Statistiken zurücksetzen</button>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Point Animation Container -->
    <div id="pointAnimationContainer" class="point-animation-container"></div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal hidden">
        <div class="modal-content help-content">
            <div class="modal-header">
                <h2>🎮 Hilfe & Tastatur-Shortcuts</h2>
                <button class="modal-close-btn" id="closeHelpBtn">✖️</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>🎯 Spielregeln</h3>
                    <ul>
                        <li><strong>Punkte:</strong> Richtige Antworten = +Punkte, Falsche = -Punkte</li>
                        <li><strong>Daily Doubles:</strong> Setze deinen eigenen Einsatz (💰-Symbol)</li>
                        <li><strong>Spielerwechsel:</strong> Bei falschen Antworten wechselt der Spieler</li>
                        <li><strong>Gewinner:</strong> Höchste Punktzahl am Ende gewinnt</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h3>⌨️ Keyboard-Shortcuts</h3>
                    <div class="shortcuts-grid">
                        <div class="shortcut-item"><kbd>Space</kbd> Antwort zeigen</div>
                        <div class="shortcut-item"><kbd>R</kbd> Richtig</div>
                        <div class="shortcut-item"><kbd>F</kbd> Falsch</div>
                        <div class="shortcut-item"><kbd>Esc</kbd> Modal schließen</div>
                        <div class="shortcut-item"><kbd>S</kbd> Statistiken</div>
                        <div class="shortcut-item"><kbd>F11</kbd> Vollbild</div>
                    </div>
                </div>
                <div class="help-section">
                    <h3>📱 Touch-Gesten</h3>
                    <ul>
                        <li><strong>Wisch nach oben:</strong> Statistiken öffnen</li>
                        <li><strong>Wisch nach unten:</strong> Modal schließen</li>
                        <li><strong>Doppeltipp:</strong> Schnell-Aktionen</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeHelpBtn2" class="modal-btn-secondary">Verstanden! 👍</button>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Pause Overlay -->
    <div id="pauseOverlay" class="pause-overlay hidden">
        <div class="pause-content">
            <h2>⏸️ Spiel pausiert</h2>
            <p>Drücke einen beliebigen Button um fortzufahren</p>
            <button id="resumeGameBtn" class="modal-btn resume-btn">Fortsetzen</button>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rulesModal" class="modal hidden">
        <div class="modal-content rules-modal-content">
            <div class="modal-header">
                <h2>📋 Jeopardy Spielregeln</h2>
                <button class="modal-close-btn" id="closeRulesBtn">✖️</button>
            </div>
            <div class="modal-body rules-body">
                <div class="rules-section">
                    <h3>🎯 Spielziel</h3>
                    <p>Beantworte Fragen richtig und sammle die meisten Punkte! Der Spieler oder die Gruppe mit den meisten Punkten gewinnt.</p>
                </div>

                <div class="rules-section">
                    <h3>🎮 Spielablauf</h3>
                    <ol>
                        <li><strong>Kategorien wählen:</strong> Es gibt 5 IT-Kategorien mit je 5 Fragen</li>
                        <li><strong>Punkte-System:</strong> Fragen sind 100, 200, 300, 400 und 500 Punkte wert</li>
                        <li><strong>Fragen wählen:</strong> Der aktuelle Spieler wählt eine Kategorie und Punktzahl</li>
                        <li><strong>Antworten:</strong> Die Frage wird vorgelesen - jeder kann antworten</li>
                        <li><strong>Bewertung:</strong> Richtige Antwort = Punkte dazu, falsche Antwort = Punkte weg</li>
                        <li><strong>Spielerwechsel:</strong> Bei falscher Antwort ist der nächste Spieler dran</li>
                    </ol>
                </div>

                <div class="rules-section">
                    <h3>⏰ Timer-Regeln</h3>
                    <ul>
                        <li>Jede Frage hat ein <strong>Zeitlimit</strong> (standardmäßig 90 Sekunden)</li>
                        <li>Zeit läuft ab dem Vorlesen der Frage</li>
                        <li>Bei Zeitüberschreitung gilt die Antwort als <strong>falsch</strong></li>
                        <li>Timer kann in den Einstellungen angepasst oder deaktiviert werden</li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>💰 Punkte-System</h3>
                    <ul>
                        <li><strong>Richtige Antwort:</strong> Volle Punktzahl zur Gesamtpunktzahl dazu</li>
                        <li><strong>Falsche Antwort:</strong> Volle Punktzahl von Gesamtpunktzahl abgezogen</li>
                        <li><strong>Negative Punkte sind möglich!</strong> Pass auf bei schweren Fragen</li>
                        <li>Am Ende gewinnt der Spieler/die Gruppe mit den <strong>meisten Punkten</strong></li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>🎲 Daily Double (Spezial)</h3>
                    <p>Falls aktiviert: Bei manchen Fragen kannst du deinen <strong>Einsatz verdoppeln</strong>!</p>
                    <ul>
                        <li>Du kannst einen beliebigen Betrag setzen (bis zu deiner aktuellen Punktzahl)</li>
                        <li>Bei richtiger Antwort: <strong>Doppelte Punkte!</strong></li>
                        <li>Bei falscher Antwort: <strong>Doppelter Verlust!</strong></li>
                    </ul>
                </div>

                <div class="rules-section">
                    <h3>👥 Spielmodi</h3>
                    <div class="game-modes">
                        <div class="mode-info">
                            <h4>🧑 Einzelspieler</h4>
                            <p>2-6 einzelne Spieler treten gegeneinander an</p>
                        </div>
                        <div class="mode-info">
                            <h4>👫 Gruppenspieler</h4>
                            <p>2-4 Teams mit mehreren Mitgliedern pro Gruppe</p>
                        </div>
                    </div>
                </div>

                <div class="rules-section">
                    <h3>🏆 Gewinnbedingungen</h3>
                    <p>Das Spiel endet wenn <strong>alle 25 Fragen</strong> (5 Kategorien × 5 Fragen) beantwortet wurden.</p>
                    <p>Der Spieler oder die Gruppe mit den <strong>meisten Punkten gewinnt!</strong></p>
                </div>

                <div class="rules-section tips-section">
                    <h3>💡 Taktik-Tipps</h3>
                    <ul>
                        <li><strong>Beginne mit niedrigen Punktzahlen</strong> um dich warmzuspielen</li>
                        <li><strong>Kenne deine Stärken:</strong> Wähle Kategorien die du gut kannst</li>
                        <li><strong>Vorsicht bei hohen Punktzahlen:</strong> Großer Gewinn, aber auch großes Risiko</li>
                        <li><strong>Beobachte die Konkurrenz:</strong> Wer liegt vorne? Wer ist schwach?</li>
                        <li><strong>Nutze Daily Doubles klug:</strong> Nur setzen wenn du sicher bist!</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeRulesBtn2" class="modal-btn">Alles klar - lass uns spielen! 🚀</button>
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <!-- Achievement Notifications -->
    <div id="achievementContainer" class="achievement-container"></div>

    <!-- Footer -->
    <footer class="game-footer">
            <!-- FOOTER: Entwickler-Credit und Jahr -->
        <div class="footer-content">
            <div class="developer-credit">
                <span class="footer-icon">⚡</span>
                <span class="footer-text">Entwickelt von <strong>Nico Kaschube</strong> • 2025</span>
                <span class="footer-icon">🎮</span>
            </div>
        </div>
    </footer>

    
    <!-- ==================== JAVASCRIPT ==================== -->
    
    <!-- Core Modules -->
    <script src="../javascript/modules.js"></script>
    
    <!-- Animations -->
    <script src="../javascript/animations.js"></script>
    
    <!-- Sound System -->
    <script src="../javascript/sounds.js"></script>
    
    <!-- Fragen-Datenbank werden dynamisch geladen basierend auf Modus -->
    
    <!-- Authentication System -->
    <script src="../javascript/auth.js"></script>
    <script src="../javascript/auth-ui.js"></script>
    
    <!-- Fragen-Editor -->
    <script src="../javascript/editor.js"></script>
    
    <!-- Question Stats -->
    <script src="../javascript/stats.js"></script>
    
    <!-- Feedback System -->
    <script src="../javascript/feedback.js"></script>
    
    <!-- Hauptspiel-Logik (muss zuletzt geladen werden) -->
    <script src="../javascript/script.js"></script>    <!-- ========================================= -->
    <!-- MODE SELECTION LOGIC                     -->
    <!-- ========================================= -->
    <script>
        // 🎯 Globale Variable für aktuellen Modus
        let currentGameMode = null;
        let questionsLoaded = false;
        
        // 🎮 Automatischer Start mit Standard-Modus
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎮 Jeopardy Quiz - Lade Standard-Modus...');
            
            // Direkt Standard-Modus laden (kein Modus-Auswahl mehr)
            loadStandardMode();
        });
        
        // 📦 Standard-Modus direkt laden
        function loadStandardMode() {
            currentGameMode = 'standard';
            console.log('🎯 Standard-Modus wird geladen...');
            
            // Lade Standard-Fragen
            const script = document.createElement('script');
            script.src = '../fragenkataloge/questions_standard.js';
            script.onload = () => {
                console.log('✅ questions_standard.js geladen');
                questionsLoaded = true;
                
                // Prüfe ob jeopardyData verfügbar ist
                if (typeof jeopardyData !== 'undefined') {
                    console.log('✅ jeopardyData verfügbar mit', jeopardyData.categories.length, 'Kategorien');
                } else {
                    console.error('❌ jeopardyData nicht gefunden!');
                }
            };
            script.onerror = () => {
                console.error('❌ Fehler beim Laden von questions_standard.js');
                alert('Fehler: Fragen konnten nicht geladen werden!');
            };
            document.head.appendChild(script);
        }
    </script>
    
    <!-- ========================================= -->
    <!-- INITIALISIERUNG & STARTUP               -->
    <!-- ========================================= -->
    <script>
        // 🚀 Debug-Modus nach DOM-Laden initialisieren (nur Debug, kein Spielstart mehr hier!)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎮 Jeopardy Quiz - Initialisierung...');
            
            // Debug-Modus Hinweis in Console
            if (typeof DEBUG_CONFIG !== 'undefined' && DEBUG_CONFIG.enabled) {
                console.log('%c🔧 DEBUG-MODUS AKTIV 🔧', 'color: #ff6b6b; font-size: 16px; font-weight: bold;');
                console.log('Verfügbare Debug-Befehle:');
                console.log('• enableDebug() - Debug-Modus umschalten');
                console.log('• debugStats() - Statistiken anzeigen'); 
                console.log('• startPerformanceMonitoring() - Performance überwachen');
            }
            
            // Performance-Monitor starten falls aktiviert
            if (typeof DEBUG_CONFIG !== 'undefined' && DEBUG_CONFIG.performance && window.performanceMonitor) {
                performanceMonitor.startMonitoring();
            }
        });
        
        // 📊 Unload-Event für Cleanup
        window.addEventListener('beforeunload', function() {
            if (window.performanceMonitor) {
                performanceMonitor.stopMonitoring();
            }
            
            if (window.debugLog) {
                debugLog.showStats();
            }
        });
    </script>
</body>
</html>