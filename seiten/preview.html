<!--
    Datei: preview.html
    Projekt: Lehrer Tools Web-App
    Autor: Nico Kaschube
    Jahr: 2025
    Beschreibung: Vorschau und Leaks zu kommenden Tools und Spielen.
-->
<!DOCTYPE html>
<html lang="de">
<head>
        <!--
            HEAD-Bereich: Einstellungen, Styles und Skripte f√ºr die Seite.
            - Styles: Aussehen und Layout der Seite
            - JavaScript: Dynamische Funktionen (z.B. Responsive-Design)
        -->
            <script>
            function setBaseSizeVar() {
                var vh = window.innerHeight * 0.01;
                var vw = window.innerWidth * 0.01;
                if (window.matchMedia('(orientation: portrait)').matches) {
                    document.documentElement.style.setProperty('--base-size', vw + 'px');
                } else {
                    document.documentElement.style.setProperty('--base-size', vh + 'px');
                }
            }
            window.addEventListener('resize', setBaseSizeVar);
            window.addEventListener('orientationchange', setBaseSizeVar);
            document.addEventListener('DOMContentLoaded', setBaseSizeVar);
            </script>
        <style>
            /* Fallback f√ºr √§ltere Browser: Sorgt f√ºr Lesbarkeit, wenn moderne CSS-Features nicht unterst√ºtzt werden */
            @supports not (container-type: inline-size) {
                .leak-title, .leak-badge {
                    font-size: clamp(2.5em, 6vw, 5em);
                }
                .leak-card, .leak-section {
                    font-size: clamp(1em, 3vw, 2em);
                }
            }
            .leak-title, .leak-badge {
                font-weight: 800;
                background: linear-gradient(45deg, #e0aaff, #c77dff, #9d4edd);
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
                -webkit-text-fill-color: transparent;
                text-shadow: none;
            }
            .leak-card, .leak-section {
                font-weight: 500;
            }
            :root {
                --color-bg: #0a0a0a;
                --color-accent: #9d4edd;
                --color-primary: #e0aaff;
                --color-secondary: #c77dff;
                --color-card-bg: rgba(26,26,26,0.8);
            }
            body {
                background: var(--color-bg);
                color: var(--color-primary);
            }
            .btn-primary {
                background: var(--color-accent);
                color: #fff;
            }
            .leak-title, .leak-card, .leak-section {
                will-change: transform;
            }
        </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exklusive Leaks - Lehrer Tools</title>
    <link rel="icon" type="image/svg+xml" href="../icons/logo-simple.svg">
    <style>
        :root {
            --base-size: 1vh;
        }
        @media (orientation: portrait) {
            :root {
                --base-size: 1vw;
            }
        }
        html, body {
            font-size: var(--base-size);
        }
        main.page-container {
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto 1fr auto;
            min-height: 100vh;
        }
        .leak-section, .video-container, .overlay {
            container-type: inline-size;
            container-name: mainblock;
        }
        .leak-title, .leak-badge {
            font-size: clamp(2.5em, 6cqw, 5em);
        }
        .leak-card, .leak-section {
            font-size: clamp(1em, 3cqw, 2em);
        }
        .leak-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
        }
        @media (max-width: 700px) {
            .leak-grid {
                grid-template-columns: 1fr;
            }
        }
        .leak-card {
            padding: min(2.5em, 5cqw);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            align-items: center;
            justify-content: center;
            background: #000;
        }

        .video-container.active {
            display: flex;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
            z-index: 10;
            display: none;
            justify-content: space-between;
            align-items: center;
        }

        .overlay.active {
            display: flex;
        }

        .leak-badge {
            background: linear-gradient(135deg, #9d4edd 0%, #c77dff 100%);
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(157, 77, 221, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            z-index: 10;
            animation: fadeIn 1s ease;
            text-align: center;
            display: none;
        }

        .message.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .emoji {
            font-size: 24px;
            margin-right: 10px;
        }

        /* ESC Message */
        .esc-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 59, 48, 0.95);
            color: white;
            padding: 30px 50px;
            border-radius: 20px;
            font-size: 24px;
            font-weight: bold;
            z-index: 1000;
            display: none;
            text-align: center;
            box-shadow: 0 10px 40px rgba(255, 59, 48, 0.5);
            animation: shake 0.5s;
        }

        .esc-message.active {
            display: block;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-50%, -50%) rotate(-5deg); }
            75% { transform: translate(-50%, -50%) rotate(5deg); }
        }

        /* Loading Screen */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            background: #0a0a0a;
        }

        .start-box {
            background: rgba(26, 26, 26, 0.95);
            border: 1px solid rgba(199, 125, 255, 0.2);
            padding: 40px 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(157, 77, 221, 0.3);
            text-align: center;
            max-width: 500px;
            animation: slideIn 0.5s ease;
            backdrop-filter: blur(10px);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .start-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .start-title {
            font-size: 24px;
            font-weight: bold;
            color: #e0aaff;
            margin-bottom: 15px;
        }

        .start-text {
            font-size: 16px;
            color: #c77dff;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-warning {
            background: rgba(157, 77, 221, 0.15);
            border-left: 4px solid #9d4edd;
            padding: 12px 15px;
            margin-bottom: 30px;
            text-align: left;
            border-radius: 5px;
            font-size: 14px;
            color: #e0aaff;
        }

        .start-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn-confirm {
            background: linear-gradient(135deg, #9d4edd 0%, #c77dff 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(157, 77, 221, 0.4);
        }

        .btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(157, 77, 221, 0.6);
        }

        .btn-cancel {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(199, 125, 255, 0.3);
            color: #c77dff;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(199, 125, 255, 0.5);
        }

        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px 20px;
            text-align: center;
            font-size: 0.9rem;
            color: #9d4edd;
            z-index: 999;
        }

        .footer.video-mode {
            display: none;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .loading-screen.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(199, 125, 255, 0.2);
            border-top: 4px solid #c77dff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #c77dff;
            font-size: 18px;
            margin-bottom: 30px;
        }

        .loading-subtext {
            color: #9d4edd;
            font-size: 14px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .progress-bar {
            width: 300px;
            height: 6px;
            background: rgba(199, 125, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 auto;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9d4edd, #c77dff);
            width: 0%;
            animation: progress 2.5s ease-out forwards;
        }

        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .feature-list {
            text-align: left;
            margin: 20px 0;
            padding: 15px 20px;
            background: rgba(157, 77, 221, 0.1);
            border-radius: 10px;
            border-left: 3px solid #9d4edd;
        }

        .feature-item {
            color: #c77dff;
            font-size: 14px;
            margin: 8px 0;
            display: flex;
            align-items: center;
        }

        .feature-item::before {
            content: "‚úì";
            color: #9d4edd;
            font-weight: bold;
            margin-right: 10px;
        }

        .version-badge {
            display: inline-block;
            background: rgba(157, 77, 221, 0.2);
            color: #e0aaff;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .confidential-notice {
            background: rgba(255, 59, 48, 0.15);
            border-left: 4px solid #ff3b30;
            padding: 12px 15px;
            margin-bottom: 25px;
            text-align: left;
            border-radius: 5px;
            font-size: 13px;
            color: #ff6b6b;
        }

        .confidential-notice strong {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
                <iframe src="background-bubbles-boxes.html" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;border:none;pointer-events:none;" aria-hidden="true" tabindex="-1"></iframe>
            <!-- HEADER: Seitenkopf mit Titel, Navigation und Login/Logout -->
            <!--
                Hauptnavigation und Titel der Seite.
                - Links f√ºhren zur√ºck zur Startseite
                - Login/Logout wird per JavaScript gesteuert
            -->
            <!--
                VORSCHAU: Leaks und Vorschau auf kommende Tools und Spiele
                - Karten und Sektionen zeigen neue Features und geplante Erweiterungen
            -->
            <!-- FOOTER: Entwickler-Credit und Jahr -->
        <!--
        Testing-Hinweis:
        Teste die Seite auf verschiedenen Ger√§ten, Browsern und mit Screenreadern.
        Pr√ºfe Zoom, Kontrast und Layout bei extremen Gr√∂√üen.
        -->
    <!-- Professional Watermark & Build Info (Nr. 4) -->
    <div class="watermark" id="watermark" style="position: fixed; top: 80px; right: 10px; background: rgba(255, 59, 48, 0.15); border: 1px solid rgba(255, 59, 48, 0.4); padding: 8px 15px; border-radius: 8px; font-size: 11px; color: #ff6b6b; font-family: 'Courier New', monospace; z-index: 998; backdrop-filter: blur(10px);">
        ‚ö†Ô∏è INTERNAL PREVIEW - NOT FOR PRODUCTION
    </div>
    <div class="build-info" id="buildInfo" style="position: fixed; bottom: 10px; right: 10px; background: rgba(157, 77, 221, 0.15); border: 1px solid rgba(157, 77, 221, 0.4); padding: 6px 12px; border-radius: 6px; font-size: 10px; color: #e0aaff; font-family: 'Courier New', monospace; z-index: 998;">
        Build: 2025.11.10-dev | v1.1.0-beta (1147)
    </div>

    <!-- Changelog Overlay (Nr. 5) -->
    <div class="changelog-overlay" id="changelogOverlay">
        <div class="changelog-box" style="background: rgba(26, 26, 26, 0.95); border: 1px solid rgba(199, 125, 255, 0.3); border-radius: 15px; padding: 30px 40px; max-width: 600px; box-shadow: 0 20px 60px rgba(157, 77, 221, 0.4);">
            <div style="color: #e0aaff; font-size: 22px; font-weight: bold; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                üìã Release Notes v1.1.0-beta
            </div>
            <div style="color: #e0aaff; font-size: 14px; line-height: 1.8;">
                <div style="color: #e0aaff; font-weight: bold; margin-top: 15px; margin-bottom: 5px; font-size: 15px;">‚ú® Neue Features (+12)</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ KI-gest√ºtzter Fragengenerator mit GPT-Integration</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Erweiterte Statistiken & Analytics Dashboard</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Neue Quiz-Modi: Buzzer & Speed-Round</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Interaktive Sch√ºler-Dashboards mit Live-Updates</div>
                
                <div style="color: #e0aaff; font-weight: bold; margin-top: 15px; margin-bottom: 5px; font-size: 15px;">üêõ Bug Fixes (-8)</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Timer-Synchronisation verbessert</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Sound-Engine Performance optimiert</div>
                
                <div style="color: #e0aaff; font-weight: bold; margin-top: 15px; margin-bottom: 5px; font-size: 15px;">‚ö° Performance</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Ladezeit um 40% verbessert</div>
                <div style="margin: 10px 0; padding-left: 20px; color: #c77dff;">‚Ä¢ Memory-Optimierung durchgef√ºhrt</div>
            </div>
        </div>
    </div>

    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="start-box">
            <div class="start-icon">üéØ</div>
            <span class="version-badge">v1.1.0-beta</span>
            <h2 class="start-title">Vorabzugriff-Vorschau</h2>
            <p class="start-text">
                Du hast Zugriff auf unver√∂ffentlichte Features der n√§chsten Version.
            </p>
            
            <div class="feature-list">
                <div class="feature-item">KI-gest√ºtzter Fragengenerator</div>
                <div class="feature-item">Erweiterte Statistiken & Analytics</div>
                <div class="feature-item">Neue Quiz-Modi (Buzzer, Speed-Round)</div>
                <div class="feature-item">Interaktive Sch√ºler-Dashboards</div>
            </div>

            <div class="confidential-notice">
                <strong>üîí Vertraulich - Nur f√ºr Lehrkr√§fte</strong>
                Bitte teile diese Vorschau nicht mit Sch√ºlern. Die Features befinden sich noch in der Testphase.
            </div>

            <div class="start-buttons">
                <button class="btn-cancel" onclick="goBack()">Zur√ºck</button>
                <button class="btn-confirm" onclick="showLoading()">Preview starten</button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">Verbinde mit Preview-Server...</div>
            <div class="loading-subtext" id="loadingSubtext">Initialisiere Verbindung...</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer" id="footer">
        Entwickelt von Nico Kaschube, Azubi zum Fachinformatiker f√ºr IT-Systemelektroniker
    </div>

    <!-- Video Container -->
    <div class="overlay" id="overlay">
        <div class="leak-badge">
            üîì EXKLUSIVE LEAKS
        </div>
        <button class="close-btn" onclick="goBack()">‚Üê Zur√ºck</button>
    </div>

    <div class="video-container" id="videoContainer">
        <video id="video" loop>
            <source src="../assets/preview.mp4" type="video/mp4">
            Dein Browser unterst√ºtzt das Video-Tag nicht.
        </video>
    </div>

    <div class="message" id="message">
        <span class="emoji">üòÇ</span>
        Du wurdest erfolgreich gerickrollt!
        <span class="emoji">üéµ</span>
    </div>

    <!-- ESC Easter Egg Message -->
    <div class="esc-message" id="escMessage">
        üö´ Sch√∂ner Versuch! Kein Entkommen mehr! üòÇ
    </div>

    <script>
        // ===== ENHANCED FAKE DEVELOPER CONSOLE LOGS (Nr. 1) =====
        const currentTime = new Date().toISOString();
        const fakeIP = '192.168.1.' + Math.floor(Math.random() * 254 + 1);
        const sessionId = 'sess_' + Math.random().toString(36).substr(2, 9);
        
        console.log('%cüîì Beta Preview Modul v1.1.0', 'color: #9d4edd; font-weight: bold; font-size: 16px;');
        console.log('%c‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'color: #9d4edd;');
        console.log(`%c[${currentTime}] System initialisiert`, 'color: #c77dff;');
        console.log(`%c[Preview] Sitzungs-ID: ${sessionId}`, 'color: #c77dff;');
        console.log(`%c[Preview] Client IP: ${fakeIP}`, 'color: #c77dff;');
        console.log(`%c[Preview] User-Agent: ${navigator.userAgent.substring(0, 50)}...`, 'color: #c77dff;');
        console.log('%c[Preview] Umgebung: Entwicklung', 'color: #c77dff;');
        console.log('%c[Preview] Build: 2025.11.10-dev (1147)', 'color: #c77dff;');
        
        setTimeout(() => {
            console.log('%c[Preview] Pr√ºfe Server-Status...', 'color: #c77dff;');
            console.log('%c[Preview] ‚úì Server: preview.oberlinhaus.local [ONLINE]', 'color: #50fa7b;');
        }, 300);

        setTimeout(() => {
            console.log('%c[Preview] Verifiziere SSL-Zertifikat...', 'color: #c77dff;');
            console.log('%c[Preview] ‚úì SSL: G√ºltig (L√§uft ab: 2026-11-10)', 'color: #50fa7b;');
        }, 600);
        
        setTimeout(() => {
            console.log('%c[Preview] Pr√ºfe Autorisierung...', 'color: #c77dff;');
            console.log('%c[Preview] ‚úì Autorisierung: Beta-Zugang gew√§hrt', 'color: #50fa7b;');
            console.log('%c[Preview] Lade verschl√ºsselte Assets...', 'color: #c77dff;');
        }, 900);

        setTimeout(() => {
            console.log('%c[Preview] ‚úì Assets entschl√ºsselt (AES-256)', 'color: #50fa7b;');
            console.log('%c[Preview] Initialisiere Feature-Module...', 'color: #c77dff;');
            console.log('%c[Preview]   ‚Üí KI-Fragengenerator: OK', 'color: #50fa7b;');
            console.log('%c[Preview]   ‚Üí Analytics-Engine: OK', 'color: #50fa7b;');
            console.log('%c[Preview]   ‚Üí Live-Dashboard: OK', 'color: #50fa7b;');
        }, 1200);

        setTimeout(() => {
            console.log('%c[Preview] Stelle sichere Verbindung her...', 'color: #c77dff;');
            console.log('%c[Preview] ‚úì WebSocket verbunden: wss://preview.oberlinhaus.local:8443', 'color: #50fa7b;');
        }, 1500);

        setTimeout(() => {
            console.log('%c[Preview] Sende anonyme Telemetrie-Daten...', 'color: #c77dff;'); // Nr. 6
            console.log('%c[Preview] ‚úì Telemetrie gesendet: 847 Bytes', 'color: #50fa7b;');
        }, 1800);

        setTimeout(() => {
            console.log('%c[Preview] ‚úì Preview-Modul bereit', 'color: #50fa7b; font-weight: bold;');
            console.log('%c[Preview] Warte auf Benutzer-Interaktion...', 'color: #c77dff;');
            console.log('%c‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'color: #9d4edd;');
        }, 2100);

        // ===== MAIN SCRIPT =====
        const video = document.getElementById('video');
        const startScreen = document.getElementById('startScreen');
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingText = document.getElementById('loadingText');
        const loadingSubtext = document.getElementById('loadingSubtext');
        const videoContainer = document.getElementById('videoContainer');
        const overlay = document.getElementById('overlay');
        const message = document.getElementById('message');
        const footer = document.getElementById('footer');
        const escMessage = document.getElementById('escMessage');
        const watermark = document.getElementById('watermark');
        const buildInfo = document.getElementById('buildInfo');
        const changelogOverlay = document.getElementById('changelogOverlay');

        // ===== ESC KEY EASTER EGG (Nr. 5) =====
        let videoStarted = false;
        let escPressed = false;
        let altF4Blocked = false;
        let closeAttempted = false;

        function showNiceTryMessage(trigger) {
            if (videoStarted) {
                // Zeige "Sch√∂ner Versuch!" Nachricht
                escMessage.classList.add('active');
                
                // Console log
                console.log(`%cüö´ ${trigger} erkannt! Sch√∂ner Versuch! üòÇ`, 'color: #ff6b6b; font-size: 14px; font-weight: bold;');
                console.log('%cAber es gibt kein Entkommen vor Rick Astley! üéµ', 'color: #ff6b6b;');
                
                // Verstecke nach 2 Sekunden
                setTimeout(() => {
                    escMessage.classList.remove('active');
                }, 2000);
            }
        }

        // ESC Taste
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && videoStarted && !escPressed) {
                escPressed = true;
                showNiceTryMessage('ESC');
                
                setTimeout(() => {
                    escPressed = false;
                }, 2500);
                
                e.preventDefault();
                return false;
            }
            
            // ALT+F4 (nur ALT+F4 zusammen)
            if (e.altKey && e.key === 'F4' && videoStarted) {
                if (!altF4Blocked) {
                    altF4Blocked = true;
                    showNiceTryMessage('ALT+F4');
                    
                    // Nach 2.5 Sekunden erlauben
                    setTimeout(() => {
                        altF4Blocked = false;
                    }, 2500);
                    
                    e.preventDefault();
                    return false;
                }
                // Beim zweiten Mal nicht blockieren - Browser schlie√üt
            }

            // STRG+W (Tab schlie√üen) - fangen wir hier ab!
            if (e.ctrlKey && e.key === 'w' && videoStarted) {
                if (!closeAttempted) {
                    closeAttempted = true;
                    showNiceTryMessage('STRG+W (Tab Close)');
                    
                    setTimeout(() => {
                        closeAttempted = false;
                    }, 2500);
                    
                    e.preventDefault();
                    return false;
                }
                // Beim zweiten Mal durchlassen
            }
        });

        // Browser Zur√ºck-Button (History back)
        let backButtonBlocked = false;
        
        window.addEventListener('popstate', function(e) {
            if (videoStarted && !backButtonBlocked) {
                backButtonBlocked = true;
                
                // Zeige Nachricht
                showNiceTryMessage('Browser Back');
                
                // Pushe State zur√ºck damit wir auf der Seite bleiben
                history.pushState(null, '', window.location.href);
                
                // Nach 2.5 Sekunden erlaube zur√ºckgehen
                setTimeout(() => {
                    backButtonBlocked = false;
                }, 2500);
            }
        });

        // Seite schlie√üen / Tab schlie√üen (X-Button)
        // Trick: Mouse-Bewegung zum oberen Rand erkennen (X-Button Area)
        let isClosing = false;
        let mouseAtTop = false;
        let mouseAtBackButton = false;
        
        document.addEventListener('mousemove', function(e) {
            // Wenn Maus ganz oben ist (wo X-Button ist)
            if (e.clientY < 10 && videoStarted && !closeAttempted) {
                mouseAtTop = true;
            } else {
                mouseAtTop = false;
            }
            
            // Zur√ºck-Button Area (links oben: X < 100, Y < 50)
            if (e.clientX < 100 && e.clientY < 50 && videoStarted) {
                if (!mouseAtBackButton) {
                    mouseAtBackButton = true;
                    
                    // Zeige rote Box beim Hovern √ºber Zur√ºck-Button
                    if (!escMessage.classList.contains('active')) {
                        escMessage.classList.add('active');
                        console.log('%cüö´ Maus schwebt √ºber Zur√ºck-Button! Sch√∂ner Versuch! üòÇ', 'color: #ff6b6b; font-size: 14px; font-weight: bold;');
                        
                        // Verstecke nach 2 Sekunden automatisch
                        setTimeout(() => {
                            if (mouseAtBackButton && !backButtonBlocked) {
                                escMessage.classList.remove('active');
                            }
                        }, 2000);
                    }
                }
            } else {
                if (mouseAtBackButton) {
                    mouseAtBackButton = false;
                    // Verstecke Box wenn Maus weggeht (falls nicht durch Zur√ºck-Button blockiert)
                    setTimeout(() => {
                        if (!backButtonBlocked && !mouseAtBackButton) {
                            escMessage.classList.remove('active');
                        }
                    }, 500);
                }
            }
        });
        
        // Mouse verl√§sst das Fenster oben = wahrscheinlich X-Button!
        document.addEventListener('mouseleave', function(e) {
            if (mouseAtTop && videoStarted && !closeAttempted && !isClosing) {
                isClosing = true;
                
                // Zeige rote Box SOFORT
                escMessage.classList.add('active');
                console.log('%cüö´ Maus oben verlassen - X-Button-Klick erkannt! Nice try! üòÇ', 'color: #ff6b6b; font-size: 14px; font-weight: bold;');
                
                // Verstecke nach 1.5 Sekunden falls es doch kein Schlie√üen war
                setTimeout(() => {
                    if (!closeAttempted) {
                        escMessage.classList.remove('active');
                        isClosing = false;
                    }
                }, 1500);
            }
        });
        
        // Fange blur event (wenn Tab Fokus verliert)
        window.addEventListener('blur', function() {
            if (videoStarted && !closeAttempted && !isClosing) {
                isClosing = true;
                
                // Zeige rote Box falls noch nicht sichtbar
                if (!escMessage.classList.contains('active')) {
                    escMessage.classList.add('active');
                    console.log('%cüö´ Tab-Schlie√üen erkannt! Sch√∂ner Versuch! üòÇ', 'color: #ff6b6b; font-size: 14px; font-weight: bold;');
                }
                
                // Falls es doch kein Schlie√üen war, verstecke nach 2 Sekunden
                setTimeout(() => {
                    if (!closeAttempted) {
                        escMessage.classList.remove('active');
                        isClosing = false;
                    }
                }, 2000);
            }
        });
        
        // beforeunload f√ºr X-Button
        window.addEventListener('beforeunload', function(e) {
            if (videoStarted && !closeAttempted) {
                closeAttempted = true;
                
                // Rote Box sollte schon sichtbar sein
                escMessage.classList.add('active');
                console.log('%cüö´ beforeunload triggered!', 'color: #ff6b6b;');
                
                // Browser-Dialog mit Custom-Text
                const message = 'üö´ Sch√∂ner Versuch! Willst du Rick Astley wirklich verlassen? üòÇ';
                e.preventDefault();
                e.returnValue = message;
                
                // Reset nach 3 Sekunden wenn User bleibt
                setTimeout(() => {
                    closeAttempted = false;
                    isClosing = false;
                    escMessage.classList.remove('active');
                }, 3000);
                
                return message;
            }
            // Beim zweiten Versuch: durchlassen
        });

        // Realistic loading messages (Enhanced - Nr. 1, 2, 6)
        const loadingSteps = [
            { main: 'Verbinde mit Preview-Server...', sub: `wss://preview.oberlinhaus.local:8443 | ${fakeIP}` },
            { main: 'Authentifiziere Beta-Zugang...', sub: `Token: ${sessionId.substring(0, 15)}...` },
            { main: 'Lade verschl√ºsselte Assets...', sub: 'AES-256 Entschl√ºsselung: 847KB | 89%...' },
            { main: 'Initialisiere Feature-Module...', sub: 'AI Engine | Analytics | Live Updates' },
            { main: 'Sende Telemetrie-Daten...', sub: 'Anonymous usage stats: 847 bytes' },
            { main: 'Validiere Build-Integrit√§t...', sub: 'Checksum: OK | Signature: Valid' }
        ];

        let currentStep = 0;

        function showLoading() {
            // Console log
            console.log('%c[Preview] Benutzer hat Preview-Zugang angefordert', 'color: #c77dff; font-weight: bold;');
            console.log(`%c[Preview] Zeitstempel: ${new Date().toISOString()}`, 'color: #c77dff;');
            console.log('%c[Preview] Starte Preview-Sequenz...', 'color: #c77dff;');
            
            // Verstecke Start-Screen
            startScreen.style.display = 'none';
            
            // Zeige Changelog erst f√ºr 3 Sekunden (Nr. 5)
            changelogOverlay.classList.add('active');
            console.log('%c[Preview] Zeige Release Notes v1.1.0-beta...', 'color: #c77dff;');
            
            setTimeout(() => {
                changelogOverlay.classList.remove('active');
                console.log('%c[Preview] Release Notes best√§tigt', 'color: #50fa7b;');
                
                // Dann zeige Loading-Screen
                loadingScreen.classList.add('active');
                
                // Update loading text dynamically
                const updateInterval = setInterval(() => {
                    if (currentStep < loadingSteps.length) {
                        loadingText.textContent = loadingSteps[currentStep].main;
                        loadingSubtext.textContent = loadingSteps[currentStep].sub;
                        
                        // Console log f√ºr jeden Schritt
                        console.log(`%c[Preview] ${loadingSteps[currentStep].main}`, 'color: #c77dff;');
                        
                        currentStep++;
                    } else {
                        clearInterval(updateInterval);
                    }
                }, 500);
                
                // Random delay zwischen 3-4 Sekunden (f√ºr Changelog + Loading)
                const randomDelay = 3000 + Math.random() * 1000;
                
                setTimeout(() => {
                    console.log('%c[Preview] ‚úì Alle Systeme bereit', 'color: #50fa7b; font-weight: bold;');
                    console.log('%c[Preview] Starte Preview-Wiedergabe...', 'color: #c77dff;');
                    startVideo();
                }, randomDelay);
                
            }, 3000); // Changelog f√ºr 3 Sekunden
        }

        function startVideo() {
            // Verstecke Loading-Screen und Footer
            loadingScreen.classList.remove('active');
            footer.classList.add('video-mode');
            
            // Verstecke Watermarks wenn Video startet
            watermark.classList.add('hidden');
            buildInfo.classList.add('hidden');
            
            // Zeige Video
            videoContainer.classList.add('active');
            overlay.classList.add('active');
            
            // Mark video as started (for ESC easter egg)
            videoStarted = true;
            
            // Add history state for back button detection
            history.pushState(null, '', window.location.href);
            
            // Console log
            console.log('%c[Preview] üé¨ Wiedergabe gestartet', 'color: #50fa7b; font-weight: bold;');
            console.log(`%c[Preview] Video-Codec: H.264 | Aufl√∂sung: 1280x720 | Bitrate: 2500kbps`, 'color: #c77dff;');
            console.log(`%c[Preview] Audio: AAC 44.1kHz Stereo`, 'color: #c77dff;');
            
            // Starte Video mit Sound
            video.volume = 0.7;
            video.play();
            
            // Zeige Rickroll-Nachricht nach 2 Sekunden
            setTimeout(() => {
                message.classList.add('active');
                console.log('%c‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'color: #ff6b6b;');
                console.log('%cüòÇ GERICKROLLT! Du wurdest reingelegt!', 'color: #ff6b6b; font-size: 18px; font-weight: bold;');
                console.log('%cNever gonna give you up, never gonna let you down! üéµ', 'color: #ff6b6b; font-size: 14px;');
                console.log('%c‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê', 'color: #ff6b6b;');
                console.log('%cDas war KEINE echte Beta-Vorschau üòÑ', 'color: #ff6b6b;');
                console.log('%cAber du bist drauf reingefallen! Gut gemacht, dass du die Konsole checkst! üëç', 'color: #ff6b6b;');
            }, 2000);
        }

        function goBack() {
            if (videoStarted && !backButtonBlocked) {
                // Erster Klick: Zeige "Sch√∂ner Versuch!" Nachricht
                backButtonBlocked = true;
                showNiceTryMessage('Zur√ºck-Button');
                
                setTimeout(() => {
                    backButtonBlocked = false;
                }, 2500);
                
                return; // Blockiere das Zur√ºckgehen
            }
            
            // Zweiter Klick: Erlaube zur√ºckgehen
            console.log('%c[Preview] Benutzer hat Preview verlassen', 'color: #c77dff;');
            window.close();
            setTimeout(() => {
                window.location.href = 'start.html';
            }, 100);
        }

        // Initial console log on page load
        setTimeout(() => {
            console.log('%c[Preview] ‚úì Preview module ready', 'color: #50fa7b;');
            console.log('%c[Preview] Waiting for user interaction...', 'color: #c77dff;');
        }, 1500);
    </script>
</body>
</html>
